## IMClientProjects

程序所用到的技术，以及思维导图。

![即时通信客户端思维导图](https://i.imgur.com/jOQSnru.png)

[** Bmob云数据库**]()
[**环信即时通信**]()


## 即时通信需求文档

### 1、 闪屏页

-   #### 1.1、界面效果
```
    闪屏页用于展示公司或者产品的新特性，加强用户对本公司和产品的深刻印象。
```

-   #### 1.2、功能需求
```
    1. 在进入闪屏页界面时需要判断用户是否已经登录，如果已经登录则跳过闪屏页直接进入主界面。如果没有登录则让闪屏页停留 2s 后，进入登录界面。在进入登录界面或者主界面前需要将该界面销毁掉。
    2. 闪屏界面要求适配不同屏幕分辨率的设备。图片内容可以显示不全，但是必须保证横竖比不能变。
```

### 2、登录功能

-   #### 2.1、界面效果

-   #### 2.2、功能需求

    * ##### 2.2.1、数据回显
```
        数据回显分两种情况，一是从闪屏界面进来，如果系统本地已经有用户名和密码则自动填充。二是从注册界面跳转进来，注册成功后会自动跳转到登录界面以方便用户直接登录，当从注册界面进入登录界面时，需要携带注册成功的用户名，此时登录界面需要自动填充用户名，然后让用户输入密码再登录。
```

    * ##### 2.2.2、登录
```
        1. 有两种情况都可以发起登录操作，一是点击登录按钮，二是点击虚拟键盘上的 Action键。
        2. 不管哪种方式发起的登录业务逻辑，都必须对用户名和密码进行校验，其中用户名的长度必须是 3-20 位，首字母必须为英文字符，其他字符则除了英文外还可以是数字或者下划线。密码必须是 3-20 位的数字。登录时需要显示提示对话框。
        3. 登录成功需要从环信服务器上获取当前用户的所有联系人，然后保存到本地数据库中，同时跳转到主界面。
```

    * ##### 2.2.3、新用户
```
        当用户点击“新用户”时需要跳转到注册界面，同时需要将当前界面销毁掉。
```

    * ##### 2.2.4、输入时增强功能
```
        1. 当用户的焦点在用户名输入框时，虚拟键盘的 Action 键需显示为下一步（Next），当用户点击虚拟键盘上的下一步（Next）时，应该将焦点切换到密码输入框。
        2. 当用户的焦点在密码框时，虚拟键盘上的 Action 键显示为回车按钮（Done），当点击回车键时发起登录逻辑。
```

### 3、注册界面

-   #### 3.1、界面效果

-   #### 3.2、功能需求

    * ##### 3.2.1、注册
```
        1. 由于没有专门为该 App 搭建服务器，因此会把更多的逻辑放到客户端。
        2. 用户注册的数据需要存储在云数据库上，我们使用的是 `Bmob` 公司的云数据库。消息的发送和接收使用的是`环信`提供的即时通信云平台。
        3. 因此我们的注册需要注册两个平台，首先将数据注册到 `Bmob` 云数据库，如果成功了，再注册到`环信`平台。这里需要注意，有时候可能会出现这种情况，`Bmob` 注册成功了，但是环信注册失败了，这时候我们就需要将` Bmob `上注册的数据给删除掉，从而保证注册的一致性。
        4. 注册时对用户名和密码需要进行合法性校验。校验规则见登录时校验规则。
```

    * ##### 3.2.2、输入时增强功能
```
        该功能参见登录功能。
```

### 4、 主界面

-   #### 4.1、界面效果

-   #### 4.2、功能需求

    * ##### 4.2.1、界面的切换

    * ##### 4.2.2、联系人变化监听

    * ##### 4.2.3、消息变化监听

### 5、 聊天界面

-   #### 5.1、界面效果

-   #### 5.2、功能需求

    * ##### 5.2.1、发送消息

    * ##### 5.2.2、接收消息

### 6、联系人界面

-   #### 6.1、界面效果

-   #### 6.2、功能需求

### 7、设置界面

-   #### 7.1、界面效果

-   #### 7.2、功能需求

### 8、消息界面

-   #### 8.1、界面效果

-   #### 8.2、功能需求

### 9、添加好友界面

-   #### 9.1、界面效果

-   #### 9.2、功能需求

### 10、通知栏功能

-   #### 10.1、界面效果

-   #### 10.2、功能需求


## 更新记录
```
描述|修改类型（A，M，D）|修改日期
-|-|-
闪屏页|A|2017-09-19
登陆功能|A|2017-09-19
```


## License

```
 Copyright (c) 2017, The Jeterlee authors 

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
```
